<html>
    <body>
      <head>
        <meta charset="utf-8" />
        <title>Lab 2: Integrity</title>
        <link rel="stylesheet" href="../styles/main.css" />
        <script type="text/javascript" src="../scripts/cShift.js"></script>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.3/jquery.min.js"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
      </head>

      <div class="topnav" id="Navbar">
        <div class="headerBU" style="text-align: center; height: 80px;">
          <img src="https://www.bradley.edu/dotAsset/1cc22ef2-a30c-4f83-a4ea-d36172d54d73.svg" alt="Bradley Logo" class="responsive" />
        </div>
        <a href="../cia-labs-home.html">CIA Lab Home</a>
        <a href="../integrity-lab/integrity-lab-visualizer.html">Visualizer</a>
      </div>
      
    
        <div class="header">
          <h1>CIA Lab 2: Integrity - Try it out</h1>
          <!---
          <p class="description">
            Sometimes encryption and decryption are easier to understand through
            visualization, and this animation is built to help do just that!
            <br />When ready, enter a message and key, then click the "Next" button
            below. To start from the beginning, use the "Reset" button.
          </p>-->


          <span>
            <p id="info" class="box" style="font-size: 120%;" readonly>
              Type in a message below and click next to learn how to hash a message.
            </p>
          </span>  
        
        <div class="header">
          <div>
            <label for="message"><strong>Message to Hash</strong></label>
            <input id="message" type="text" placeholder="Insert your message here!" onsubmit="return this.value"
              style="width: 250px;" />
          </div>
          <label for="key">
            <br /><strong>Shared Secret</strong></label>
          <input id="key" type="number" placeholder="0" value="0" max="26" min="-26" style="width: 100px;" />
          <br>
          <br>
        
          <div class="field">
            <!--BUTTONS-->
            <button id="next1" onclick="start()">Next</button>
            <button id="next2" style="display: none;" onclick="stepTwo()">Next</button>
            <button id="next3" style="display: none;" onclick="stepThree()">Next</button>
            <button id="dButton" style="display: none;" onclick="final()">Decrypt</button>
            <button id="reset2" onclick="window.location.href = window.location.href;">Reset</button>
            <input type="checkbox" id="hacking" name="hacking" value="hacking">
            <label for="hacking"> Enable Hacking</label>
          </div>

        </div>

        
          <div class="leftcolumn">
            
              <h2>ALICE</h2>
              <h5>Sender</h5>
              <!-- <img src="../images/caeser-images/alice.png" width="200" height="180">
               -->
              <div>
                <input id="Umessage" placeholder="User Message" type="text" style="width:40%; text-align: center; border: 2px solid rgb(244, 133, 186);" readonly />
                <input id="Ssercet" placeholder="Shared Secret" type="text" style="width:40%; text-align: center; border: 2px solid rgb(244, 133, 186);" readonly />
              </div>

              </br>
              
              <input id="Hmessage"  placeholder="Hashed Message" type="text" style="width:80%; text-align: center; border: 2px solid rgb(244, 133, 186)" readonly />
              
              <br>
              <br>
              <br>
              
              <input id="Explain"  placeholder="Explaination" type="text" style="width:80%; height: 150px; text-align: center; border: 2px solid rgb(244, 133, 186)" readonly />
          </div>

          <div class="column">
            
            <br>
              <br>
              <br>
                <br>
                <br>
                <marquee 
                    direction = "right" 
                    id = "moveText"
                    loop = 2
                    style="width: 100%";
                   
                    
                    >
                </marquee> 
              <img src="../images/AB_arrow.png" id="arrows" alt="arrows" >
              <!-- <img src="../images/caeser-images/hacker_og.png" width="200" height="180">-->
              <input placeholder="Hashed Message" id="HHmessage" type="text" style="width:280px; text-align: center; border: 2px solid rgb(48, 71, 66)" readonly />

              <img src="/images/Rats-Small.png" id="rats" alt="rats" style="display: none; object-fit:scale-down; "> 
          </div>

          <div class="column">
            
              <h2>BOB</h2>
              <h5>Recipient</h5>
              <!-- <img src="../images/caeser-images/bob.png" width="200" height="180">
               -->
              <input id="BHmessage" placeholder="Hashed Message" type="text" style="width:80%; text-align: center; border: 2px solid rgb(127, 164, 255);" readonly />
              <br>
              <br>
                <input id="Bmessage" placeholder="Message" type="text" style="width:40%; text-align: center; border: 2px solid rgb(127, 164, 255)" readonly />
                <input id="Bhash" placeholder="Hash" type="text" style="width:40%; text-align: center; border: 2px solid rgb(127, 164, 255)" readonly />
              </br>
            </br>
                <input id="SecretMessage" placeholder="Secret Message" type="text" style="width:40%; text-align: center; border: 2px solid rgb(127, 164, 255)" readonly />
                <input id="Hashed" placeholder="Hashed" type="text" style="width:40%; text-align: center; border: 2px solid rgb(127, 164, 255)" readonly />
              </br>
            </br>
               <input id="Result" placeholder="Result" type="text" style="width:80%; text-align: center; border: 2px solid rgb(127, 164, 255)" readonly />

              <div>
                
             

            
          </div>
          
        

          <div class="footer">
            Property of Bradley University. All Rights Reserved. 2023
          </div>
        
        
          <script type="text/javascript" src="../scripts/cShift.js"></script>
          <script>
         
  var next = document.getElementById("next"); //Next button
          var aEncrypt = document.getElementById("aEncrypt"); //Encrypted Message text box for alice
          var aOriginal = document.getElementById("aOriginal"); // OG Alice text
          var bEncrypt = document.getElementById("bEncrypt"); //Encrypted Message text box for bob
          var bDecrypt = document.getElementById("bDecrypt"); //uncrypted Message text box for bob
          var hEncrypt = document.getElementById("hEncrypt"); //Encrypted Message text box for hacker
          var message = document.getElementById("message"); //Message to Encrypt text box
          var eKey = document.getElementById("key"); //number of places to shift
          var aOutput = ""; //final encrypted message goes here
          var moveText = document.getElementById("moveText"); //The moving text
      
      
          var start = async function () {
  
              aOriginal.value = message.value;
              if (message.value.trim() == "")
              {
                alert("The inputted message is only spaces!");
                return -1;
              }
              
              if(message.value == "")
              {
                document.getElementById("info").style.color = "blue";
                document.getElementById("info").innerHTML = "Please enter a message to encrypt.";
              }
              else
              {
                document.getElementById("next1").style = "display:none";
                //anim functions await their completion before continuing
                await diagramGenerateTable(aOriginal.value.toUpperCase(), "cipherTable");
                await populateTextTable(aOriginal.value.toUpperCase(), "messageTable");
                //continue..
                document.getElementById("info").style.color = "blue";
                document.getElementById("info").innerHTML = "Before you send your message you have to encryt it so hackers can not read the message. Set a shift value and click the next button to enrypt it.";
                document.getElementById("next2").style = "display:all";
                document.getElementById('message').readOnly = true;
              }
          }
  
          var stepTwo = async function () 
          {
            document.getElementById("next2").style = "display:none";
            //anim functions await their completion before continuing
            await diagramShiftAnimation(eKey.value, 100, "cipherTable");
            await diagramEncryptAnimation (100, "cipherTable", "messageTable")
            //continue...
            aEncrypt.value = cShift(aOriginal.value, eKey.value);
            document.getElementById("info").style.color = "black";
            document.getElementById("info").innerHTML = "Your message should now be encrpted so hackers can not read it. Click the next button to send it.";
            document.getElementById("next3").style = "display:all";
  
          }
          var stepThree = function () 
          {
              if(eKey.value % 26 == "0")
              {
                  document.getElementById("info").style.color = "red";
                  document.getElementById("info").innerHTML = "HACKER ALERT!! \nThe hacker has intercepted your message: Make sure to use a key larger than 0 to properly encrypt!";
                  document.body.style.backgroundColor = "red";
                  document.getElementById("arrows").src = "../images/caeser-images/hacker_og.png";
                  bEncrypt.value = aOriginal.value;
                  hEncrypt.value = aOriginal.value;
              }
              else
              {
                  aEncrypt.value = cShift(aOriginal.value, eKey.value);
                  document.body.style.backgroundColor = "white";
                  document.getElementById("info").style.color = "black";
                  document.getElementById("info").innerHTML = "Your message was received but can not be read without decrpting with the key. Click Decrypt so the mesaage can be read by the receiver and the the hacker.";
                  bEncrypt.value = aEncrypt.value;
                  hEncrypt.value = aEncrypt.value;
                  document.getElementById("next3").style = "display:none";
                  document.getElementById("arrows").src = "../images/Arrow_gif.gif";
                  document.getElementById("lock").style = "display:all";
                  document.getElementById("dButton").style = "display:all";
                  moveText.textContent = bEncrypt.value;
                  moveText.start();
              }
          }
          var final = async function () 
          {
            document.getElementById("dButton").style = "display:none";
            //decrypt anim then continue...
            await diagramEncryptAnimation (100, "cipherTable", "messageTable", true);
            //continue...
            bDecrypt.value = aOriginal.value;
            document.getElementById("info").innerHTML = "Congrats! Your mesage was read by the reciever and not the hacker. Click Next Page or Reset to start again.";
            document.getElementById("arrows").src = "../images/AB_arrow_right.png";
            document.getElementById("lock").src = "../images/caeser-images/unlock.png";
          }
        </script>
        
    <script>
      window.onscroll = function () { myFunction() };

      var topnav = document.getElementById("Navbar");
      var sticky = topnav.offsetTop;

      function myFunction() {
        if (window.pageYOffset > sticky) {
          topnav.classList.add("sticky");
        } else {
          topnav.classList.remove("sticky");
        }
      }
    </script>

    
    
  </body>

  
</html>